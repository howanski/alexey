{% extends 'base.html.twig' %}
{% set breadcrumbs = [
	{'name': 'menu_record'|localised('money')},
	{'name': 'menu_record_nodes'|localised('money')},
	]
%}


{% block pageContentPrimary %}
	{% set groups = settings.choices %}
	{% set groups = {'*': null}|merge(groups) %}
	{% if groups|length > 2 %}
		<div class="justify-center -my-4 flex flex-wrap">
			{% for groupName, groupId in groups %}
				<a class="py-1 my-1 px-4 shadow-md no-underline rounded-full text-white font-sans font-semibold text-sm border-blue btn-primary hover:text-white hover:bg-blue-light focus:outline-none active:shadow-none mr-2{% if groupId is same as (node_group) %} bg-nord9{% else %} bg-nord1{% endif %}" href="{{ path('money_node_index', { groupId: groupId }) }}">
					{{ groupName }}
				</a>
			{% endfor %}
		</div>
	{% endif %}
{% endblock %}

{% block pageContentSecondary %}
	{% if node_group is null %}
		{% set hideColumns = [] %}
	{% else %}
		{% set hideColumns = [3] %}
	{% endif %}
	{% set tableData = {} %}

	{% for money_node in money_nodes %}
		{% set actions %}
		<a href="{{ path('money_node_show', {'id': money_node.id}) }}" class="bg-nord2 text-white hover:bg-nord3 text-xs font-bold px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1">{{ 'show'|localised }}</a>
		<a href="{{ path('money_node_edit', {'id': money_node.id}) }}" class="bg-nord2 text-white hover:bg-nord3 text-xs font-bold px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1">{{ 'edit'|localised }}</a>
		{% endset %}

		{% set tableData = tableData|merge([{
			'name': money_node.name,
			'node_type': money_node.typeCode|localisedFormValue('node_type', 'money'),
			'node_group': settings.groupName(money_node.nodeGroup),
			'balance': money_node.balance,
			'actions': actions
		}]) %}
	{% endfor %}

	{% include 'table.html.twig'
		with {
			'tableTitle' : 'menu_record_nodes'|localised('money'),
			'tableHeaders' : [
				'name'|localised,
				'node_type'|localisedFormLabel('money'),
				'node_group'|localisedFormLabel('money'),
				'balance'|localised('money'),
				'actions'|localised,
			],
			'tableData': tableData,
			'buttons': [
				{'href': path('money_node_new'), text: 'add'|localised },
				{'href': path('money_node_settings'), text: 'settings'|localised },
			],
			'hideColumns': hideColumns,
		} only
	%}
{% endblock %}
